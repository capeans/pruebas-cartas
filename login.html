<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Acceder</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <style>
    .auth-wrapper{max-width:480px;margin:40px auto;padding:0 16px;font-family:system-ui, -apple-system, BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.4;}
    .auth-wrapper h1{font-size:2rem;font-weight:600;margin-bottom:24px;}
    .auth-wrapper label{font-size:15px;font-weight:500;display:block;margin-bottom:4px;}
    .auth-wrapper input{width:100%;padding:10px 12px;border:1px solid #999;border-radius:4px;font-size:15px;margin-bottom:16px;}
    .auth-wrapper button#auth-btn{width:100%;padding:12px 16px;background:#111;color:#fff;border-radius:6px;border:none;cursor:pointer;font-size:15px;font-weight:500;}
    .auth-wrapper button#toggle-mode{background:none;border:none;color:#0066ff;cursor:pointer;padding:0;font-size:15px;}
    .center-text{text-align:center;font-size:15px;margin-top:16px;}
    #auth-error{color:#c00;font-size:14px;margin-top:20px;font-family:monospace;}
  </style>
</head>
<body class="body-footer-fijo">
<header>
  <img src="img/logo.png" alt="Uzutcg Logo" style="height:40px;"/>
  <nav class="nav">
    <a href="index.html">Inicio</a>
    <a href="cajas.html">Cajas</a>
    <a href="cartas.html">Cartas</a>
    <a href="todo.html">Tienda</a>
    <a href="carrito.html">Carrito (<span id="cart-count" style="display:none">0</span></a>
  </nav>
</header>

<main class="auth-wrapper">
  <h1 id="auth-title">Iniciar sesión</h1>

  <div id="register-extra" style="display:none;">
    <label>Nombre completo</label>
    <input id="reg-name" type="text" />
  </div>

  <label>Email</label>
  <input id="auth-email" type="email" />

  <label>Contraseña</label>
  <input id="auth-pass" type="password" />

  <button id="auth-btn">Entrar</button>

  <p class="center-text">
    <span id="toggle-text">¿No tienes cuenta?</span>
    <button id="toggle-mode">Regístrate</button>
  </p>

  <p class="center-text" style="margin-top:20px;">
    <a href="index.html">Volver a la tienda</a>
  </p>

  <p id="auth-error"></p>
</main>

<script>
// simple local auth placeholders to be wired with backend later
let mode="login";
const titleEl=document.getElementById("auth-title");
const extraEl=document.getElementById("register-extra");
const btnEl=document.getElementById("auth-btn");
const toggleBtn=document.getElementById("toggle-mode");
const toggleText=document.getElementById("toggle-text");
const errorEl=document.getElementById("auth-error");

toggleBtn.addEventListener("click",()=>{
  mode=(mode==="login"?"register":"login");
  if(mode==="login"){
    titleEl.textContent="Iniciar sesión";
    extraEl.style.display="none";
    btnEl.textContent="Entrar";
    toggleText.textContent="¿No tienes cuenta?";
    toggleBtn.textContent="Regístrate";
  }else{
    titleEl.textContent="Crear cuenta";
    extraEl.style.display="block";
    btnEl.textContent="Registrarme";
    toggleText.textContent="¿Ya tienes cuenta?";
    toggleBtn.textContent="Inicia sesión";
  }
});

btnEl.addEventListener("click",()=>{
  errorEl.textContent="(backend auth pendiente)";
  window.location.href="carrito.html";
});
</script>

<footer class="footer"><div class="container footer-grid"><div><h3>UzuTCG</h3><p>Cartas y cajas coleccionables.</p><small>© <span id="year"></span> UzuTCG</small></div></div></footer>
<script>UZU.year();UZU.updateCartCount();</script>




<script>
  (async () => {
    try {
      const cart = await getCartDetail();
      const count = cart.reduce((sum, item) => sum + item.qty, 0);
      const el = document.getElementById('cart-count');
      if (el) el.textContent = count;
    } catch(e) {}
  })();
</script>


<script src="js/api.js"></script>
<script src="js/auth.js"></script>
<script src="js/cart.js"></script>
<script>
  async function refreshCartCount() {
    try {
      const cart = await getCartDetail();
      const count = cart.reduce((sum, item) => sum + item.qty, 0);
      const el = document.getElementById('cart-count');
      if (el) el.textContent = count;
    } catch(e) {}
  }
  (async () => { await refreshCartCount(); })();
</script>

</body>
</html>
