<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>checkout.html - UzuTCG</title>
  <link rel="icon" type="image/png" href="img/logo.png"/>
  <link rel="stylesheet" href="css/styles.css"/>
</head>
<body>
  
<header class="site-header" style="display:flex;justify-content:space-between;align-items:center;gap:16px;padding:12px 16px;border-bottom:1px solid #ddd;">
  <a href="index.html" class="logo" style="display:flex;align-items:center;gap:8px;text-decoration:none;color:#000;font-weight:600;">
    <img src="img/logo.png" alt="UzuTCG" style="height:40px;width:auto;"/>
    <span>UzuTCG</span>
  </a>

  <nav class="main-nav" style="display:flex;flex-wrap:wrap;gap:12px;font-size:14px;">
    <a href="cajas.html" style="text-decoration:none;color:#000;font-weight:500;">Cajas</a>
    <a href="cartas.html" style="text-decoration:none;color:#000;font-weight:500;">Cartas</a>
    <a href="todo.html" style="text-decoration:none;color:#000;font-weight:500;">Tienda</a>
    <a href="login.html" style="text-decoration:none;color:#000;font-weight:500;">Cuenta</a>
    <a href="carrito.html" style="text-decoration:none;color:#000;font-weight:600;">
      Carrito (<span id="cart-count">0</span>)
    </a>
  </nav>
</header>

  <main style="padding:16px;"><header class='header'><div class='container header-inner'><a class='brand' href='index.html'><img class='brand-logo' src='assets/img/logo.svg' alt='UzuTCG'><span class='brand-name'>UzuTCG</span></a><nav id='site-nav' class='nav'><a href='cartas.html'>Cartas</a><a href='cajas.html'>Cajas</a><a href='categoria.html?cat=Pok%C3%A9mon'>CategorÃ­as</a><a href='conecta.html'>Conecta</a></nav><a class='btn cart-icon' href='cart.html' aria-label='Carrito'>ðŸ›’<span id='cart-count' class='cart-count' style='display:none'>0</span></a></div></header>
<section class='section'><div class='container'>
<header class='section-head'><h2>Checkout</h2><p>Completa tus datos y confirma el pedido.</p></header>
<div class='grid' style='grid-template-columns:1.5fr 1fr;gap:14px'>
  <article class='card'><div class='wrap'><h3>Datos de envÃ­o</h3>
    <form id='checkout-form' class='form'>
      <div class='form-grid'>
        <label>Nombre completo<input name='name' required></label>
        <label>Email<input type='email' name='email' required></label>
        <label>TelÃ©fono<input name='phone'></label>
        <label>Ciudad<input name='city' required></label>
        <label class='full'>DirecciÃ³n<textarea name='address' rows='3' required></textarea></label>
      </div>
      <h3>MÃ©todo de pago</h3>
      <label><input type='radio' name='pay' value='card' checked> Tarjeta</label>
      <label><input type='radio' name='pay' value='paypal'> PayPal</label>
      <div class='actions'><button class='btn btn-primary' type='submit'>Pagar ahora</button></div>
      <p id='pay-status' class='meta'></p>
    </form>
  </div></article>
  <article class='card'><div class='wrap'><h3>Resumen</h3><div id='summary'></div></div></article>
</div>
</div></section>
<script>
(function(){
  const sum = document.getElementById('summary'); const items = UZU.cartLoad();
  if(!items.length){ sum.innerHTML = "<div class='empty'>Carrito vacÃ­o.</div>"; return; }
  let total=0;
  sum.innerHTML = items.map(x=>{ total += x.price*x.qty; return "<div style='display:flex;justify-content:space-between'><span>"+x.name+" Ã— "+x.qty+"</span><strong>"+(x.price*x.qty).toFixed(2)+" â‚¬</strong></div>";}).join('')
    + "<hr><div style='display:flex;justify-content:space-between'><span>Total</span><strong>"+total.toFixed(2)+" â‚¬</strong></div>";
  const form = document.getElementById('checkout-form'); const status = document.getElementById('pay-status');
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    status.textContent = "Procesando pago (demo)â€¦";
    setTimeout(()=>{
      status.textContent = "Pago completado (demo). Â¡Gracias!";
      localStorage.removeItem('uzu_cart_v1'); UZU.updateCartCount();
    }, 1000);
  });
})();
</script>
<footer class='footer'><div class='container footer-grid'><div><a class='brand' href='index.html'><img class='brand-logo' src='assets/img/logo.svg' alt='UzuTCG'><span class='brand-name'>UzuTCG</span></a><p>Â© <span id='year'></span> UzuTCG</p></div><nav><a href='#' onclick='alert("Aviso legal (demo)");return false;'>Aviso legal</a> Â· <a href='#' onclick='alert("Privacidad (demo)");return false;'>Privacidad</a></nav></div></footer><script>document.getElementById('year').textContent=new Date().getFullYear();</script></main>
  <footer style="text-align:center;font-size:13px;color:#666;border-top:1px solid #ddd;padding:24px 16px;margin-top:40px;">
    Â© 2025 UzuTCG - Todos los derechos reservados
  </footer>
  
<script src="js/api.js"></script>
<script src="js/auth.js"></script>
<script src="js/cart.js"></script>
<script>
async function refreshCartCount() {
  try {
    const cart = await getCartDetail();
    const count = cart.reduce((sum, item) => sum + item.qty, 0);
    const el = document.getElementById('cart-count');
    if (el) el.textContent = count;
  } catch(e) {}
}
(async () => { await refreshCartCount(); })();
</script>

</body>
</html>